{"version":3,"sources":["../init_ws.js"],"names":["process","env","PORT","on","info","gracefulStop","stop","then","exit","catch","err","error"],"mappings":"AAAA;;AAEA;;AAEA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,uCAAgBA,QAAQC,GAAR,CAAYC,IAA5B;;AAEA;AACAF,QAAQG,EAAR,CAAW,MAAX,EAAmB,YAAM;AACvB,mBAAOC,IAAP,CAAY,mCAAZ;AACAC;AACD,CAHD;AAIAL,QAAQG,EAAR,CAAW,QAAX,EAAqB,YAAM;AACzB,mBAAOC,IAAP,CAAY,wCAAZ;AACAC;AACD,CAHD;AAIAL,QAAQG,EAAR,CAAW,SAAX,EAAsB,YAAM;AAC1B,mBAAOC,IAAP,CAAY,yCAAZ;AACAC;AACD,CAHD;AAIAL,QAAQG,EAAR,CAAW,SAAX,EAAsB,YAAM;AAC1B,mBAAOC,IAAP,CAAY,yCAAZ;AACAC;AACD,CAHD;;AAKA,SAASA,YAAT,GAAwB;AACtB,qBAAGC,IAAH,GAAUC,IAAV,CAAe,YAAM;AACnB,qBAAOH,IAAP,CAAY,yCAAZ;AACAJ,YAAQQ,IAAR;AAED,GAJD,EAIGC,KAJH,CAIS,UAACC,GAAD,EAAS;AAChB,qBAAOC,KAAP,CAAaD,GAAb;AACAV,YAAQQ,IAAR,CAAa,CAAb;AACD,GAPD;AAQD","file":"init_ws.js","sourcesContent":["\"use strict\";\n\nimport \"babel-polyfill\";\n\nimport {} from 'dotenv/config';\n\nimport WS from './modules/server';\nimport Handles from './modules/routes';\nimport Logger from './modules/logger';\nimport Db from './modules/database';\n\nnew WS(Handles, process.env.PORT);\n\n// allow for graceful reload\nprocess.on('exit', () => {\n  Logger.info('Closing db session before exit...');\n  gracefulStop()\n});\nprocess.on('SIGINT', () => {\n  Logger.info('SIGINT detected. Closing db session...');\n  gracefulStop()\n});\nprocess.on('SIGTERM', () => {\n  Logger.info('SIGTERM detected. Closing db session...');\n  gracefulStop()\n});\nprocess.on('SIGQUIT', () => {\n  Logger.info('SIGQUIT detected. Closing db session...');\n  gracefulStop()\n});\n\nfunction gracefulStop() {\n  Db.stop().then(() => {\n    Logger.info('MongoDB connection successfully closed.');\n    process.exit();\n\n  }).catch((err) => {\n    Logger.error(err);\n    process.exit(1);\n  });\n}"]}