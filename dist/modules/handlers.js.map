{"version":3,"sources":["../../modules/handlers.js"],"names":["errors","handleRoot","req","res","next","log","info","name","routes","ret_routes","method","hasOwnProperty","i","length","r","push","send"],"mappings":";;;;;;AAAA;;IAAYA,M;;AAEZ;;;;AAGA;;;;;;kBAEe;;AAEbC,cAAY,SAASA,UAAT,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoC;AAC9CF,QAAIG,GAAJ,CAAQC,IAAR,yBAAmCL,WAAWM,IAA9C;;AAEA,QAAMC,SAAS,wBAAf;AACA,QAAMC,aAAa,EAAnB;AACA,SAAK,IAAIC,MAAT,IAAmBF,MAAnB,EAA2B;AACzB,UAAIA,OAAOG,cAAP,CAAsBD,MAAtB,CAAJ,EAAmC;AACjCD,mBAAWC,MAAX,IAAqB,EAArB;AACA,aAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAIJ,OAAOE,MAAP,EAAeG,MAAnC,EAA2CD,GAA3C,EAAgD;AAC9C,cAAIE,IAAIN,OAAOE,MAAP,EAAeE,CAAf,EAAkB,MAAlB,CAAR;AACA,iBAAOE,EAAE,UAAF,CAAP;AACA,iBAAOA,EAAE,QAAF,CAAP;AACAL,qBAAWC,MAAX,EAAmBK,IAAnB,CAAwBD,CAAxB;AACD;AACF;AACF;;AAEDX,QAAIa,IAAJ,CAAS,GAAT,EAAcP,UAAd;AACA,WAAOL,MAAP;AACD;AArBY,C;;AAHf","file":"handlers.js","sourcesContent":["import * as errors from 'restify-errors';\n\nimport aux from './aux';\n\n// import Db from './database';\nimport {getRoutes} from './server';\n\nexport default {\n\n  handleRoot: function handleRoot(req, res, next) {\n    req.log.info(`request handler is ${handleRoot.name}`);\n\n    const routes = getRoutes();\n    const ret_routes = {};\n    for (let method in routes) {\n      if (routes.hasOwnProperty(method)) {\n        ret_routes[method] = [];\n        for (let i = 0; i < routes[method].length; i++) {\n          let r = routes[method][i]['spec'];\n          delete r['versions'];\n          delete r['method'];\n          ret_routes[method].push(r)\n        }\n      }\n    }\n\n    res.send(200, ret_routes);\n    return next()\n  }\n}"]}