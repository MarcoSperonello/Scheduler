{"version":3,"sources":["../../modules/logger.js"],"names":["_logger","Logger","streams","enableSrc","process","env","NODE_ENV","concat","stream","stdout","level","path","LOG_PATH","push","name","serializers","bunyan","src","info"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;;;AAEA,IAAIA,UAAU,IAAd;;IAEMC,M,GACJ,kBAAc;AAAA;;AACZ,MAAI,CAACD,OAAL,EAAc;;AAEZ,QAAIE,UAAU,EAAd;AACA,QAAIC,YAAY,KAAhB;;AAEA,QAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,KAA7B,EAAoC;AAClC;AACAJ,gBAAUA,QAAQK,MAAR,CAAe,CACvB,EAACC,QAAQJ,QAAQK,MAAjB,EAAyBC,OAAO,OAAhC,EADuB,EAEvB,EAACC,MAAMP,QAAQC,GAAR,CAAYO,QAAnB,EAA6BF,OAAO,OAApC,EAFuB,CAAf,CAAV;AAIAP,kBAAY,IAAZ;AAED,KARD,MAQO,IAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,MAA7B,EAAqC;AAC1C;AACAJ,cAAQW,IAAR,CAAa,EAACF,MAAMP,QAAQC,GAAR,CAAYO,QAAnB,EAA6BF,OAAO,OAApC,EAAb;AACAP,kBAAY,IAAZ;AAED,KALM,MAKA;AACL;AACAD,cAAQW,IAAR,CAAa,EAACL,QAAQJ,QAAQK,MAAjB,EAAyBC,OAAO,MAAhC,EAAb;AACD;;AAED;AACAV,cAAU,qBAAW;AACnBc,YAAM,yBADa;AAEnBZ,eAASA,OAFU;AAGnBa,mBAAa,kBAAQC,MAAR,CAAeD,WAHT;AAInBE,WAAKd;AAJc,KAAX,CAAV;;AAOAH,YAAQkB,IAAR,6CAAuDd,QAAQC,GAAR,CAAYC,QAAnE;AACD;AACD,SAAON,OAAP;AACD,C;;kBAGY,IAAIC,MAAJ,E;;AAGf;AACA;AACA;AACA;AACA;AACA","file":"logger.js","sourcesContent":["import Restify from 'restify';\nimport Bunyan from 'bunyan';\n\nlet _logger = null;\n\nclass Logger {\n  constructor() {\n    if (!_logger) {\n\n      let streams = [];\n      let enableSrc = false;\n\n      if (process.env.NODE_ENV === 'dev') {\n        // prepare configurations for dev\n        streams = streams.concat([\n          {stream: process.stdout, level: 'debug'},\n          {path: process.env.LOG_PATH, level: 'trace'}\n        ]);\n        enableSrc = true\n\n      } else if (process.env.NODE_ENV === 'test') {\n        // prepare configurations for test\n        streams.push({path: process.env.LOG_PATH, level: 'trace'});\n        enableSrc = true\n\n      } else {\n        // prepare configuration for prod\n        streams.push({stream: process.stdout, level: 'info'})\n      }\n\n      // init an instance of logger\n      _logger = new Bunyan({\n        name: 'mobidb3-logging-service',\n        streams: streams,\n        serializers: Restify.bunyan.serializers,\n        src: enableSrc\n      });\n\n      _logger.info(`Welcome to test-ws! NODE_ENV is set to ${process.env.NODE_ENV}`);\n    }\n    return _logger\n  }\n}\n\nexport default new Logger()\n\n\n// log.fatal('fatal error');\n// log.error('some error occurred');\n// log.warn('some warn');\n// log.info('doing something cool...');\n// log.debug('debug message');\n// log.trace('trace');\n\n\n"]}